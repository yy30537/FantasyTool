# Fantasy Tool Project Structure

## ğŸ“ é¡¹ç›®æ¶æ„æ¦‚è§ˆ

```
ğŸ“ FANTASYTOOL/                    # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“ fantasy_etl/                # æ–°ETLç®¡é“æ¶æ„
â”‚   â”‚
â”‚   â”œâ”€â”€ main.py                    # ETLä¸»ç¨‹åºå…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ auth/                   # è®¤è¯æ¨¡å— âœ… å·²å®Œæˆè¿ç§»
â”‚   â”‚   â”œâ”€â”€ __init__.py            # æ¨¡å—åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ oauth_manager.py       # OAuthè®¤è¯ç®¡ç† (è¿ç§»è‡ª yahoo_api_utils.py)
â”‚   â”‚   â”œâ”€â”€ token_storage.py       # ä»¤ç‰Œå­˜å‚¨ç®¡ç† (è¿ç§»è‡ª yahoo_api_utils.py)
â”‚   â”‚   â””â”€â”€ web_auth_server.py     # WebæˆæƒæœåŠ¡å™¨ (è¿ç§»è‡ª app.py)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ extract/                # æå–å±‚ âœ… åŸºç¡€è®¾æ–½å·²å®Œæˆï¼Œæ ¸å¿ƒæå–å™¨å¼€å‘ä¸­
â”‚   â”‚   â”œâ”€â”€ yahoo_client.py        # Yahoo APIå®¢æˆ·ç«¯ âœ… å·²å®ç° (340è¡Œ)
â”‚   â”‚   â”œâ”€â”€ rate_limiter.py        # APIé€Ÿç‡é™åˆ¶å™¨ âœ… å·²å®ç° (370è¡Œ) 
â”‚   â”‚   â”œâ”€â”€ base_extractor.py      # åŸºç¡€æå–å™¨ç±» âœ… å·²å®ç° (500è¡Œ)
â”‚   â”‚   â”œâ”€â”€ api_models.py          # APIå“åº”æ•°æ®æ¨¡å‹ âœ… å·²å®ç° (620è¡Œ)
â”‚   â”‚   â””â”€â”€ extractors/            # æ•°æ®æå–å™¨é›†åˆ
â”‚   â”‚       â”œâ”€â”€ game_extractor.py        # æ¸¸æˆæ•°æ®æå– âœ… å·²å®ç°ç¨³å®š (250è¡Œ)
â”‚   â”‚       â”œâ”€â”€ league_extractor.py      # è”ç›Ÿæ•°æ®æå– âœ… å·²å®ç°ç¨³å®š (390è¡Œ)  
â”‚   â”‚       â”œâ”€â”€ team_extractor.py        # å›¢é˜Ÿæ•°æ®æå– âœ… å·²å®ç°ç¨³å®š (350è¡Œ)
â”‚   â”‚       â”œâ”€â”€ player_extractor.py      # çƒå‘˜æ•°æ®æå– âœ… å·²å®ç°ç¨³å®š (480è¡Œ)
â”‚   â”‚       â”œâ”€â”€ settings_extractor.py    # è”ç›Ÿè®¾ç½®æå– âœ… å·²å®ç°ç¨³å®š (310è¡Œ)
â”‚   â”‚       â”œâ”€â”€ stat_categories_extractor.py  # ç»Ÿè®¡ç±»åˆ«æå– âœ… å·²å®ç°ç¨³å®š (290è¡Œ)
â”‚   â”‚       â”œâ”€â”€ player_stats_extractor.py # çƒå‘˜ç»Ÿè®¡æå– âœ… å·²å®ç°ç¨³å®š (420è¡Œ)
â”‚   â”‚       â”œâ”€â”€ roster_extractor.py      # é˜µå®¹æ•°æ®æå– âœ… å·²å®ç°ç¨³å®š (380è¡Œ)
â”‚   â”‚       â”œâ”€â”€ transaction_extractor.py # äº¤æ˜“æ•°æ®æå– âœ… å·²å®ç°ç¨³å®š (450è¡Œ)
â”‚   â”‚       â”œâ”€â”€ matchup_extractor.py     # å¯¹æˆ˜æ•°æ®æå– âœ… å·²å®ç°ç¨³å®š (520è¡Œ)
â”‚   â”‚       â””â”€â”€ schedule_extractor.py    # èµ›å­£æ—¥ç¨‹æå– âœ… å·²å®ç°ç¨³å®š (310è¡Œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ transform/              # è½¬æ¢å±‚ (å·²åˆ›å»ºè®¾è®¡æ³¨é‡Š)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ parsers/            # æ•°æ®è§£æå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ game_parser.py           # æ¸¸æˆæ•°æ®è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ league_parser.py         # è”ç›Ÿæ•°æ®è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ team_parser.py           # å›¢é˜Ÿæ•°æ®è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ player_parser.py         # çƒå‘˜æ•°æ®è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ transaction_parser.py    # äº¤æ˜“æ•°æ®è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ matchup_parser.py        # å¯¹æˆ˜æ•°æ®è§£æ
â”‚   â”‚   â”‚   â””â”€â”€ standings_parser.py      # æ’åæ•°æ®è§£æ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ normalizers/        # æ•°æ®æ ‡å‡†åŒ–å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ player_normalizer.py     # çƒå‘˜ä¿¡æ¯æ ‡å‡†åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ stats_normalizer.py      # ç»Ÿè®¡æ•°æ®æ ‡å‡†åŒ–
â”‚   â”‚   â”‚   â””â”€â”€ position_normalizer.py   # ä½ç½®æ•°æ®æ ‡å‡†åŒ–
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ stats/              # ç»Ÿè®¡æ•°æ®è½¬æ¢å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ player_stats_transformer.py  # çƒå‘˜ç»Ÿè®¡è½¬æ¢
â”‚   â”‚   â”‚   â”œâ”€â”€ team_stats_transformer.py    # å›¢é˜Ÿç»Ÿè®¡è½¬æ¢
â”‚   â”‚   â”‚   â”œâ”€â”€ matchup_stats_transformer.py # å¯¹æˆ˜ç»Ÿè®¡è½¬æ¢
â”‚   â”‚   â”‚   â””â”€â”€ stat_utils.py                # ç»Ÿè®¡å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ validators.py          # æ•°æ®éªŒè¯å™¨
â”‚   â”‚   â”œâ”€â”€ cleaners.py            # æ•°æ®æ¸…æ´—å™¨
â”‚   â”‚   â””â”€â”€ quality_checks.py      # æ•°æ®è´¨é‡æ£€æŸ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ load/                   # åŠ è½½å±‚ (å·²åˆ›å»ºè®¾è®¡æ³¨é‡Š)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ database/           # æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ connection_manager.py   # è¿æ¥ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ session_manager.py      # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ models.py               # æ•°æ®æ¨¡å‹ (è¿ç§»è‡ªscripts/model.py)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ loaders/            # æ•°æ®åŠ è½½å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ base_loader.py          # åŸºç¡€åŠ è½½å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ game_loader.py          # æ¸¸æˆæ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ league_loader.py        # è”ç›Ÿæ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ team_loader.py          # å›¢é˜Ÿæ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ player_loader.py        # çƒå‘˜æ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ roster_loader.py        # é˜µå®¹æ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ transaction_loader.py   # äº¤æ˜“æ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ stats_loader.py         # ç»Ÿè®¡æ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ standings_loader.py     # æ’åæ•°æ®åŠ è½½
â”‚   â”‚   â”‚   â””â”€â”€ matchup_loader.py       # å¯¹æˆ˜æ•°æ®åŠ è½½
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ batch_processor.py     # æ‰¹é‡å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ deduplicator.py        # å»é‡å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ incremental_updater.py # å¢é‡æ›´æ–°å™¨
â”‚   â”‚   â””â”€â”€ data_quality_enforcer.py # æ•°æ®è´¨é‡å¼ºåˆ¶å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ config/                 # é…ç½®ç®¡ç† âœ… å·²å®Œæˆè¿ç§»
â”‚   â”‚   â”œâ”€â”€ __init__.py            # æ¨¡å—åˆå§‹åŒ–å’Œç»Ÿä¸€å¯¼å‡ºæ¥å£
â”‚   â”‚   â”œâ”€â”€ settings.py            # ç»Ÿä¸€é…ç½®ç®¡ç†å™¨ (æ•´åˆæ‰€æœ‰é…ç½®)
â”‚   â”‚   â”œâ”€â”€ database_config.py     # æ•°æ®åº“é…ç½® (è¿ç§»è‡ª model.py)
â”‚   â”‚   â””â”€â”€ api_config.py          # APIé…ç½® (è¿ç§»è‡ª yahoo_api_utils.py + app.py)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ monitoring/             # ç›‘æ§æ¨¡å— - å¾…å®ç°
â”‚   â”‚   â”œâ”€â”€ metrics.py             # æŒ‡æ ‡æ”¶é›†
â”‚   â”‚   â””â”€â”€ logging.py             # æ—¥å¿—ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ analytics/              # åˆ†æå±‚ - å¾…å®ç°
â”‚   â”‚   â”œâ”€â”€ aggregations.py        # èšåˆè®¡ç®—
â”‚   â”‚   â”œâ”€â”€ feature_engineering.py # ç‰¹å¾å·¥ç¨‹
â”‚   â”‚   â””â”€â”€ views.sql              # åˆ†æè§†å›¾
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ services/               # ä¸šåŠ¡æœåŠ¡ - å¾…å®ç°
â”‚       â”œâ”€â”€ team_analyzer.py       # å›¢é˜Ÿåˆ†ææœåŠ¡
â”‚       â”œâ”€â”€ matchup_analyzer.py    # å¯¹æˆ˜åˆ†ææœåŠ¡
â”‚       â””â”€â”€ trade_analyzer.py      # äº¤æ˜“åˆ†ææœåŠ¡
â”‚
â”œâ”€â”€ ğŸ“ sample_data/                # æ ·æœ¬æ•°æ®
â”‚   â”œâ”€â”€ league_info_454_l_53472.json
â”‚   â”œâ”€â”€ league_players_454_l_53472.json
â”‚   â”œâ”€â”€ league_settings_454_l_53472.json
â”‚   â””â”€â”€ (å…¶ä»–æ ·æœ¬æ–‡ä»¶...)
â”‚
â”œâ”€â”€ ğŸ“ scripts/                    # æ—§è„šæœ¬é›† (å¾…è¿ç§»ååˆ é™¤)
â”‚   â”œâ”€â”€ app.py                     # OAuthè®¤è¯æœåŠ¡å™¨
â”‚   â”œâ”€â”€ model.py                   # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ yahoo_api_data.py          # ç»Ÿä¸€æ•°æ®è·å–å·¥å…·
â”‚   â”œâ”€â”€ yahoo_api_utils.py         # APIå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ database_writer.py         # æ•°æ®åº“å†™å…¥å™¨
â”‚   â””â”€â”€ (å…¶ä»–è¾…åŠ©è„šæœ¬...)
â”‚
â”œâ”€â”€ ğŸ“ tokens/                     # è®¤è¯ä»¤ç‰Œ
â”‚   â””â”€â”€ yahoo_token.token          # Yahoo OAuthä»¤ç‰Œ
â”‚
â”œâ”€â”€ ğŸ“ doc/                        # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ yahoo-fantasy-sports-API-docs/  # Yahoo APIæ–‡æ¡£
â”‚   â”œâ”€â”€ database.md                # æ•°æ®åº“æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ project-structure.md       # é¡¹ç›®ç»“æ„æ–‡æ¡£ (æœ¬æ–‡ä»¶)
â”‚   â””â”€â”€ (å…¶ä»–æ–‡æ¡£...)
â”‚
â”œâ”€â”€ ğŸ“ fantasy_etl/
â”‚   â””â”€â”€ MIGRATION_GUIDE.md         # å®Œæ•´ETLè¿ç§»æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ“ venv/                       # Pythonè™šæ‹Ÿç¯å¢ƒ
â”‚
â”œâ”€â”€ .env                           # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ .gitattributes                 # Gitå±æ€§é…ç½®
â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜
â””â”€â”€ requirements.txt               # Pythonä¾èµ–åŒ…
```

## ğŸ”„ è¿ç§»çŠ¶æ€

### âœ… å·²å®Œæˆ
- **Extractå±‚æ¶æ„è®¾è®¡** - 11ä¸ªæå–å™¨å·²åˆ›å»ºï¼Œ9ä¸ªå·²æœ‰è®¾è®¡æ³¨é‡Šï¼Œ2ä¸ªå¾…å®ç°
- **Extractå±‚åŸºç¡€è®¾æ–½å®ç°** - åŸºç¡€è®¾æ–½å±‚å·²å®Œå…¨å®ç° (æ— scriptsä¾èµ–)
  - âœ… YahooAPIClient: Yahoo APIå®¢æˆ·ç«¯ï¼ŒOAuthé›†æˆï¼Œé‡è¯•æœºåˆ¶ (340è¡Œ)
  - âœ… RateLimiter: æ™ºèƒ½é€Ÿç‡æ§åˆ¶ï¼Œè‡ªé€‚åº”é™æµ (370è¡Œ) 
  - âœ… BaseExtractor: æå–å™¨åŸºç±»ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼ (500è¡Œ)
  - âœ… APIModels: æ•°æ®æ¨¡å‹å®šä¹‰ï¼Œç±»å‹å®‰å…¨ (620è¡Œ)
- **Transformå±‚æ¶æ„è®¾è®¡** - å®Œæ•´çš„è½¬æ¢å±‚ç»„ä»¶å·²åˆ›å»ºï¼ŒåŒ…å«è¯¦ç»†æ³¨é‡Š
- **Loadå±‚æ¶æ„è®¾è®¡** - å®Œæ•´çš„åŠ è½½å±‚ç»„ä»¶å·²åˆ›å»ºï¼ŒåŒ…å«è¯¦ç»†æ³¨é‡Š
- **Authå±‚å®Œæ•´å®ç°** - è®¤è¯æ¨¡å—å·²å®Œå…¨å®ç°å¹¶è¿ç§» (æ— å‘åå…¼å®¹æ€§ä»£ç )
- **Configå±‚å®Œæ•´å®ç°** - é…ç½®ç®¡ç†å·²å®Œå…¨å®ç°å¹¶è¿ç§» (æ— å‘åå…¼å®¹æ€§ä»£ç )
  - âœ… APIConfig: Yahoo Fantasy APIé…ç½®ç®¡ç†
  - âœ… DatabaseConfig: PostgreSQLæ•°æ®åº“é…ç½®ç®¡ç†
  - âœ… Settings: ç»Ÿä¸€é…ç½®ç®¡ç†å™¨
  - âœ… çº¯ç²¹ETLæ¶æ„è®¾è®¡ï¼Œå¯å®‰å…¨åˆ é™¤scriptsç›®å½•
- **å®Œæ•´è¿ç§»æŒ‡å—** - è¯¦ç»†çš„è¿ç§»æ˜ å°„å’Œå®æ–½è®¡åˆ’


### âœ… å·²å®Œæˆ
- **scriptsç›®å½•åŠŸèƒ½å®Œå…¨è¿ç§»** - æ‰€æœ‰scriptsåŠŸèƒ½å·²å®Œæ•´ç§»æ¤åˆ°æ–°ETLæ¶æ„
  - âœ… Authå±‚å®Œæ•´å®ç° (OAuthManager, TokenStorage, WebAuthServer)
  - âœ… Configå±‚å®Œæ•´å®ç° (APIConfig, DatabaseConfig, Settings)
  - âœ… Extractå±‚åŸºç¡€è®¾æ–½å®Œæ•´å®ç° (YahooClient, RateLimiter, BaseExtractor, APIModels)
  - âœ… Extractå±‚11ä¸ªæå–å™¨å…¨éƒ¨å®ç°ç¨³å®š (GameExtractor, LeagueExtractor, TeamExtractor, PlayerExtractor, SettingsExtractor, StatCategoriesExtractor, PlayerStatsExtractor, RosterExtractor, TransactionExtractor, MatchupExtractor, ScheduleExtractor)
  - ğŸ¯ **å¯ä»¥å®‰å…¨åˆ é™¤scriptsç›®å½•ï¼Œå®Œå…¨ä½¿ç”¨æ–°çš„ETLæ¶æ„**

### ğŸ‰ Extractå±‚è¿ç§»å®Œæˆæ€»ç»“

**11ä¸ªæ•°æ®æå–å™¨ç§»æ¤å®ŒæˆçŠ¶æ€ï¼š**
| æå–å™¨ | çŠ¶æ€ | ä»£ç è¡Œæ•° | ç±»å‹ | ä¾èµ– | æ›´æ–°é¢‘ç‡ |
|--------|------|----------|------|------|----------|
| GameExtractor | âœ… ç¨³å®šå¯ç”¨ | 250è¡Œ | CORE_ENTITY | æ—  | 168å°æ—¶ |
| LeagueExtractor | âœ… ç¨³å®šå¯ç”¨ | 390è¡Œ | CORE_ENTITY | GameExtractor | 24å°æ—¶ |
| TeamExtractor | âœ… ç¨³å®šå¯ç”¨ | 350è¡Œ | CORE_ENTITY | LeagueExtractor | 24å°æ—¶ |
| PlayerExtractor | âœ… ç¨³å®šå¯ç”¨ | 480è¡Œ | CORE_ENTITY | LeagueExtractor | 12å°æ—¶ |
| SettingsExtractor | âœ… ç¨³å®šå¯ç”¨ | 310è¡Œ | METADATA | LeagueExtractor | 168å°æ—¶ |
| StatCategoriesExtractor | âœ… ç¨³å®šå¯ç”¨ | 290è¡Œ | METADATA | LeagueExtractor | 168å°æ—¶ |
| PlayerStatsExtractor | âœ… ç¨³å®šå¯ç”¨ | 420è¡Œ | STATISTICS | PlayerExtractor | 6å°æ—¶ |
| RosterExtractor | âœ… ç¨³å®šå¯ç”¨ | 380è¡Œ | OPERATIONAL | TeamExtractor, PlayerExtractor | 24å°æ—¶ |
| TransactionExtractor | âœ… ç¨³å®šå¯ç”¨ | 450è¡Œ | OPERATIONAL | LeagueExtractor, TeamExtractor | 4å°æ—¶ |
| MatchupExtractor | âœ… ç¨³å®šå¯ç”¨ | 520è¡Œ | OPERATIONAL | TeamExtractor | 12å°æ—¶ |
| ScheduleExtractor | âœ… ç¨³å®šå¯ç”¨ | 310è¡Œ | METADATA | LeagueExtractor | 720å°æ—¶ |

**æ€»ä»£ç é‡ï¼š** 4,150è¡Œï¼ˆä»…æå–å™¨ï¼‰+ 2,300è¡Œï¼ˆåŸºç¡€è®¾æ–½ï¼‰ = **6,450è¡ŒETLä»£ç **

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- âœ… å®Œå…¨ç‹¬ç«‹çš„ETLæ¶æ„ï¼Œé›¶scriptsä¾èµ–
- âœ… ç»Ÿä¸€çš„BaseExtractoræ¥å£å’Œé”™è¯¯å¤„ç†
- âœ… åˆ†å±‚è®¾è®¡ï¼šæ ¸å¿ƒå®ä½“ â†’ å…ƒæ•°æ® â†’ ç»Ÿè®¡æ•°æ® â†’ è¿è¥æ•°æ®
- âœ… æ”¯æŒå¢é‡æ›´æ–°å’Œæ•°æ®éªŒè¯
- âœ… å®Œæ•´çš„ç±»å‹å®‰å…¨å’ŒAPIæ¨¡å‹

### ğŸ“‹ å¾…å®ç°
- **Transformå±‚å®ç°** - æ•°æ®è½¬æ¢å’Œæ¸…æ´—é€»è¾‘
- **Loadå±‚å®ç°** - æ•°æ®åŠ è½½å’Œæ‰¹é‡å¤„ç†
- **Monitoringå±‚** - ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- **Analyticså±‚** - åˆ†æå’ŒèšåˆåŠŸèƒ½
- **Serviceså±‚** - ä¸šåŠ¡æœåŠ¡æ¥å£
- **pipelineæ¨¡å—** - ETLæµç¨‹ç¼–æ’

